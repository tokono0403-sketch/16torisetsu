<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>16トリセツ</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="home">
  <main>
    <h1>16トリセツ</h1>

    <p class="lead">
      これは、あなたのタイプの取扱説明書を知るためのサイトです。<br>
      16タイプを深掘りした、あなたの取扱説明書です。
    </p>

    <form id="type-form" class="type-form">
      <input
        type="text"
        id="type-input"
        name="type"
        placeholder="例: INFP"
        autocomplete="off"
        maxlength="4"
        inputmode="latin"
      >
      <button type="submit" class="type-button">トリセツ</button>
    </form>

    <p id="type-message" class="type-message"></p>
  </main>

  <script>
    (function () {
      const form = document.getElementById("type-form");
      const input = document.getElementById("type-input");
      const message = document.getElementById("type-message");

      const validTypes = [
        "ISTJ", "ISFJ", "INFJ", "INTJ",
        "ISTP", "ISFP", "INFP", "INTP",
        "ESTP", "ESFP", "ENFP", "ENTP",
        "ESTJ", "ESFJ", "ENFJ", "ENTJ"
      ];

      form.addEventListener("submit", function (e) {
        e.preventDefault();

        // 入力を大文字4文字に正規化
        const raw = (input.value || "").trim().toUpperCase();
        input.value = raw;  // 見た目も大文字にそろえる

        if (!raw) {
          message.textContent = "タイプを入力してください。（例: INFP）";
          return;
        }

        // A〜Z の4文字以外は弾く
        if (!/^[A-Z]{4}$/.test(raw)) {
          message.textContent = "英大文字4文字で入力してください。（例: INFP, INTJ, ENFP）";
          return;
        }

        if (!validTypes.includes(raw)) {
          message.textContent = "16タイプのいずれかを入力してください。（例: INFP, INTJ, ENFP）";
          return;
        }

        message.textContent = "";

        const filename = raw.toLowerCase(); // ファイル名は小文字 infp.html 想定
        window.location.href = "types/" + filename + ".html";
      });
    })();
  </script>
</body>
</html>
